Wrote tests for core business logic.

Continued writing tests.

Focusing on testing the interaction between components.