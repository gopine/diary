Refactoring the codebase for the charts.